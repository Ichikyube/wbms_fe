<FieldArray
    gridTemplateColumns="repeat(4, minmax(0, 1fr))"
    name="permissions">
    {(arrayHelpers) => (
    <div>
        {values.permissions.map((permission, permissionIndex) => (
        <div key={permissionIndex}>
            <button
            type="button"
            onClick={() =>
                arrayHelpers.remove(permissionIndex)
            }>
            Remove Permission
            </button>
            <label>Resource:</label>
            <div style={{ flex: 1, width: "50%" }}>
            <SelectBox
                width="50%"
                name={`permissions[${permissionIndex}].resource`}
                onChange={(e) => {
                arrayHelpers.handleReplace(e);
                console.log(arrayHelpers);
                handleResourceChange(permissionIndex, e.value);
                }}
                options={availableResources}

                // label="Grants"
            />
            </div>

            <FieldArray
            name={`permissions[${permissionIndex}].grants`}>
            {(grantArrayHelpers) => (
                <div>
                {permission.grants.map((grant, grantIndex) => (
                    <div key={grantIndex}>
                    <button
                        type="button"
                        onClick={() =>
                        grantArrayHelpers.remove(grantIndex)
                        }>
                        Remove Grant
                    </button>
                    <div>
                        <label>Actions:</label>
                        <div>
                        {actionOptions.map((actionOption) => (
                            <label key={actionOption}>
                            <Field
                                type="checkbox"
                                name={`permissions[${permissionIndex}].grants[${grantIndex}].action`}
                                value={actionOption}
                            />{" "}
                            {actionOption}
                            </label>
                        ))}
                        </div>
                    </div>
                    <label>Hide Attributes:</label>
                    <Select
                        fullWidth
                        name={`permissions[${permissionIndex}].grants[${grantIndex}].attributes`}
                        closeMenuOnSelect={false}
                        components={animatedComponents}
                        defaultValue={[siteAttr[4], siteAttr[5]]}
                        isMulti
                        options={siteAttr}
                    />
                    </div>
                ))}
                <button
                    type="button"
                    onClick={() =>
                    grantArrayHelpers.push({
                        action: "",
                        possession: "",
                        attributes: [],
                    })
                    }>
                    Add Grant
                </button>
                </div>
            )}
            </FieldArray>
        </div>
        ))}
        <button
        type="button"
        onClick={() =>
            arrayHelpers.push({ resource: "", grants: [] })
        }>
        Add Permission
        </button>
    </div>
    )}
</FieldArray>